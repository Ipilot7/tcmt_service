<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCMT Service</title>
    {% load static %}
    {% load i18n %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>
    <div class="app-container">
        {% if user.is_authenticated %}
        <aside class="sidebar">
            <h2 style="color: white !important; border-bottom: 1px solid rgba(255,255,255,0.1);">TCMT Service</h2>
            <nav>
                <a href="{% url 'index' %}">ğŸ§­ {% trans "Dashboard" %}</a>
                <a href="{% url 'requests:list' %}">ğŸ“‹ {% trans "Requests" %}</a>
                <a href="{% url 'trips:list' %}">âœˆï¸ {% trans "Trips" %}</a>
                <a href="{% url 'stats' %}">ğŸ“Š {% trans "Statistics" %}</a>
                <hr style="border-color: rgba(255,255,255,0.2); margin: 10px 0;">
                <div style="padding: 10px; font-size: 0.9em; color: #adb5bd;">
                    ğŸ‘¤ {{ user.username }} <br>
                    <span style="font-size: 0.8em; opacity: 0.7;">{{ user.get_role_display }}</span>
                </div>
                <form action="{% url 'logout' %}" method="post" style="padding: 0; margin: 0;">
                    {% csrf_token %}
                    <button type="submit"
                        style="background: none; border: none; color: #ff6b6b; cursor: pointer; padding: 10px 15px; width: 100%; text-align: left; font-size: 1rem;">ğŸšª
                        {% trans "Logout" %}</button>
                </form>

                <hr style="border-color: rgba(255,255,255,0.2); margin: 15px 0;">

                <form action="{% url 'set_language' %}" method="post" style="padding: 0 15px;">
                    {% csrf_token %}
                    <input name="next" type="hidden" value="{{ request.path }}">
                    <select name="language" onchange="this.form.submit()"
                        style="width: 100%; padding: 5px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px;">
                        {% get_current_language as LANGUAGE_CODE %}
                        {% get_available_languages as LANGUAGES %}
                        {% get_language_info_list for LANGUAGES as languages %}
                        {% for language in languages %}
                        <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                            {{ language.name_local }} ({{ language.code }})
                        </option>
                        {% endfor %}
                    </select>
                </form>
            </nav>
        </aside>
        {% endif %}

        <main class="main-content">
            {% block content %}
            {% endblock %}
        </main>
    </div>
</body>

</html>