{% extends 'base.html' %}
{% load i18n %}

{% block content %}
<div class="glass-container" style="max-width: 800px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: start;">
        <div>
            <h2 style="color: white; margin: 0;">{% trans "Заявка" %} {{ request_obj.request_number }}</h2>
            <p style="color: rgba(255,255,255,0.7); margin-top: 5px;">{% trans "от" %} {{
                request_obj.created_at|date:"d.m.Y" }}</p>
        </div>
        <div style="text-align: right;">
            <span style="background: white; color: #333; padding: 5px 10px; border-radius: 15px; font-weight: bold;">
                {{ request_obj.status.name }}
            </span>
        </div>
    </div>

    <hr style="border-color: rgba(255,255,255,0.2); margin: 20px 0;">

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
        <div>
            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">{% trans "Локация" %}</h4>
            <p style="margin: 5px 0;"><strong>{% trans "Регион:" %}</strong> {{ request_obj.region.name }}</p>
            <p style="margin: 5px 0;"><strong>{% trans "Учреждение:" %}</strong> {{ request_obj.institution.name }}</p>

            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px; margin-top: 20px;">{% trans "Оборудование" %}
            </h4>
            <p style="margin: 5px 0;"><strong>{% trans "Тип:" %}</strong> {{ request_obj.equipment_type.name }}</p>
        </div>
        <div>
            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">{% trans "Контакт" %}</h4>
            <p style="margin: 5px 0;"><strong>{% trans "Телефон:" %}</strong> {{ request_obj.contact_phone }}</p>
            <p style="margin: 5px 0;"><strong>{% trans "Ответственный:" %}</strong> {{ request_obj.responsible.full_name
                }}</p>
        </div>
    </div>

    <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px; margin-top: 20px;">{% trans "Описание проблемы" %}
    </h4>
    <div
        style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px; border: 1px solid rgba(255,255,255,0.1);">
        {{ request_obj.description|linebreaks }}
    </div>

    <div style="margin-top: 30px; text-align: right;">
        <a href="{% url 'requests:list' %}" class="btn-primary" style="text-decoration: none;">{% trans "Назад к списку"
            %}</a>
        {% if user.role != 'user' %}
        <a href="{% url 'requests:update' request_obj.pk %}" class="btn-primary"
            style="text-decoration: none; margin-left: 10px;">{% trans "Редактировать" %}</a>
        {% endif %}
    </div>
</div>
{% endblock %}