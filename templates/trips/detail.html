{% extends 'base.html' %}

{% block content %}
<div class="glass-container" style="max-width: 900px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: start;">
        <div>
            <h2 style="color: white; margin: 0;">Командировка {{ trip.request_number }}</h2>
            <p style="color: rgba(255,255,255,0.7); margin-top: 5px;">от {{ trip.created_at|date:"d.m.Y" }}</p>
        </div>
        <div style="text-align: right;">
            <span style="background: white; color: #333; padding: 5px 10px; border-radius: 15px; font-weight: bold;">
                {{ trip.status.name }}
            </span>
            {% if trip.order_number %}
            <div style="margin-top: 5px; color: rgba(255,255,255,0.8);">Приказ: {{ trip.order_number }}</div>
            {% endif %}
        </div>
    </div>

    <hr style="border-color: rgba(255,255,255,0.2); margin: 20px 0;">

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
        <!-- Location & Equipment -->
        <div>
            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">Объект</h4>
            <p><strong>Регион:</strong> {{ trip.region.name }}</p>
            <p><strong>Учреждение:</strong> {{ trip.institution.name }}</p>
            <p><strong>Оборудование:</strong> {{ trip.equipment_type.name }}</p>
            <p><strong>Контакт объекта:</strong> {{ trip.contact_phone }}</p>
        </div>

        <!-- People -->
        <div>
            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">Участники</h4>
            <p><strong>Ответственный:</strong> {{ trip.responsible.full_name }}</p>
            <div style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                <p style="margin: 0; font-size: 0.9em; opacity: 0.8;">Встречающий:</p>
                <p style="margin: 5px 0;"><strong>{{ trip.escort_name }}</strong></p>
                <p style="margin: 0;">{{ trip.escort_phone }}</p>
            </div>
        </div>
    </div>

    <!-- Descriptions -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
        <div>
            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">Причина / Задача</h4>
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px;">
                {{ trip.description|linebreaks }}
            </div>
        </div>
        <div>
            <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">Результат</h4>
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px; min-height: 50px;">
                {{ trip.result_info|linebreaks|default:"-" }}
            </div>
        </div>
    </div>

    <div style="margin-top: 30px; text-align: right;">
        <a href="{% url 'trips:list' %}" class="btn-primary" style="text-decoration: none;">Назад к списку</a>
        {% if user.role != 'user' %}
        <a href="{% url 'trips:update' trip.pk %}" class="btn-primary"
            style="text-decoration: none; margin-left: 10px;">Редактировать</a>
        {% endif %}
    </div>
</div>
{% endblock %}